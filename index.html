<html>
  <head>
    <link
      href="https://fonts.googleapis.com/css?family=Roboto"
      rel="stylesheet"
      type="text/css"
    />
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <script>
        function OnSuccess(response){
            alert(response);


            const responsePayload = decodeJwtResponse(response.credential);

console.log("ID: " + responsePayload.sub);
console.log('Full Name: ' + responsePayload.name);
console.log('Given Name: ' + responsePayload.given_name);
console.log('Family Name: ' + responsePayload.family_name);
console.log("Image URL: " + responsePayload.picture);
console.log("Email: " + responsePayload.email);

console.log("User state is : " + getCookie(g_state));

        }

        function decodeJwtResponse(token) {
    var base64Url = token.split(".")[1];
    var base64 = base64Url.replace(/-/g, "+").replace(/_/g, "/");
    var jsonPayload = decodeURIComponent(
      atob(base64)
        .split("")
        .map(function (c) {
          return "%" + ("00" + c.charCodeAt(0).toString(16)).slice(-2);
        })
        .join("")
    );

    return JSON.parse(jsonPayload);
  }

  function sinoutclick(){
    
    google.accounts.id.disableAutoSelect();
  }
//   const button = document.getElementById(signout_button);
//     button.onclick = () => {
//       google.accounts.id.disableAutoSelect();
//     }

function getCookie(c_name) {
    if (document.cookie.length > 0) {
        c_start = document.cookie.indexOf(c_name + "=");
        if (c_start != -1) {
            c_start = c_start + c_name.length + 1;
            c_end = document.cookie.indexOf(";", c_start);
            if (c_end == -1) {
                c_end = document.cookie.length;
            }
            return unescape(document.cookie.substring(c_start, c_end));
        }
    }
    return "";
}

function myFunction() {
    alert("myFunction");
//   document.getElementById("demo");
google.accounts.id.disableAutoSelect();
}
        </script>
  </head>
  <html>
    <body>
      <div
        id="g_id_onload"
        data-client_id="545410903179-2fs6kht0e1hq7fvg2bv41vjs4am37ek7.apps.googleusercontent.com"
        data-context="signin"
        data-ux_mode="popup"
        data-callback="OnSuccess"
        data-nonce=""
        data-auto_prompt="false"
      ></div>

      <div
        class="g_id_signin"
        data-type="standard"
        data-shape="rectangular"
        data-theme="outline"
        data-text="."
        data-size="large"
        data-logo_alignment="left"
      ></div>
      </div>
      <div>
        <button onclick="myFunction()">Sign out</button>
      </div>
    </body>
  </html>
</html>
